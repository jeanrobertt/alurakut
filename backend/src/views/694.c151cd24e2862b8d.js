"use strict";(self.webpackChunkalurakut_ng=self.webpackChunkalurakut_ng||[]).push([[694],{1694:(L,y,o)=>{o.r(y),o.d(y,{UsersModule:()=>m});var a=o(433),Z=o(6895),c=o(5327),g=o(5861),M=o(727),U=o(1884),e=o(4650),f=o(9808),p=o(3279),P=o(5384),h=o(9653);class i{constructor(s,t,r){this.apiService=s,this.store=t,this.router=r}setUserData(s){var t=this;return(0,g.Z)(function*(){try{const[r,v,z]=yield Promise.all([(0,f.n)(t.apiService.getGitHubData(s,!1)),(0,f.n)(t.apiService.getMessages(s)),(0,f.n)(t.apiService.getCommunities(s))]);t.store.dispatch(p.L.setUserProfileData({userdata:r.userdata})),t.store.dispatch(p.L.setProfileFollowersData({followers:r.followers})),t.store.dispatch(p.L.setProfileMessages({messages:v.scrapMessages})),t.store.dispatch(p.L.setProfileCommunities({communities:z.communities}))}catch(r){return console.log(r),void t.router.navigate(["error"])}})()}}i.\u0275fac=function(s){return new(s||i)(e.LFG(P.t),e.LFG(h.yh),e.LFG(c.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"});var S=o(5981),x=o(7385),C=o(1228),A=o(8312),T=o(2613),b=o(2699),F=o(8150),J=o(783);class u{constructor(s,t,r){this.messageService=s,this.store=t,this.route=r}ngOnInit(){var s=this;return(0,g.Z)(function*(){try{s.receiver=s.route.snapshot.paramMap.get("user"),s.store.select(r=>r.user.userdata).subscribe(r=>s.sender=r.login)}catch(t){console.log(t)}})()}sendMessage(){try{let s=setInterval(()=>{this.text&&this.sender&&this.receiver&&(this.messageService.sendMessage({text:this.text,sender:this.sender,receiver:this.receiver}),this.text="",clearInterval(s))},500)}catch(s){console.log(s)}}}u.\u0275fac=function(s){return new(s||u)(e.Y36(J.A),e.Y36(h.yh),e.Y36(c.gz))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-send-message"]],decls:5,vars:1,consts:[[1,"form",3,"ngSubmit"],["name","text","type","text","required","","placeholder","O que deseja enviar?","aria-label","O que deseja enviar?",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-outline-primary"]],template:function(s,t){1&s&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return t.sendMessage()}),e.TgZ(1,"div")(2,"textarea",1),e.NdJ("ngModelChange",function(v){return t.text=v}),e.qZA()(),e.TgZ(3,"button",2),e._uU(4,"Enviar Messagem"),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("ngModel",t.text))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F],styles:["form[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-top:15px}"]});const $=function(n){return{type:"user",data:n}};class d{constructor(s,t,r){this.userProfileService=s,this.route=t,this.store=r,this.followersProfile={smallTitle:"",items:[]},this.communitiesProfile={smallTitle:"",items:[]},this.name$="",this.subscriptions=new M.w0}ngOnInit(){var s=this;this.subscriptions.add(this.route.paramMap.pipe((0,U.x)((t,r)=>t.get("user")===r.get("user"))).subscribe(function(){var t=(0,g.Z)(function*(r){s.name$=r.get("user"),yield s.userProfileService.setUserData(s.name$)});return function(r){return t.apply(this,arguments)}}())),this.subscriptions.add(this.store.select(t=>t.userProfile).subscribe(t=>{this.setData(t)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setData(s){this.userdata$=s.userdata,this.followersProfile.smallTitle=`Seguidores (${s.userdata?.followers})`,this.followersProfile.items=[],s.followers?.forEach(t=>{this.followersProfile.items.push({name:t.login,image:t.avatar_url,link:`/u/${t.login}`})}),this.communitiesProfile.smallTitle=`Comunidades (${s.communities?.length})`,this.communitiesProfile.items=[],s.communities?.forEach(t=>{this.communitiesProfile.items.push({name:t.title,image:t.imageUrl,link:`/community/${t._id}`})})}}d.\u0275fac=function(s){return new(s||d)(e.Y36(i),e.Y36(c.gz),e.Y36(h.yh))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-users"]],decls:20,vars:6,consts:[[1,"profileArea"],[3,"data"],[1,"welcomeArea"],[1,"title"],[1,"subTitle"],[1,"profileRelationsArea"]],template:function(s,t){1&s&&(e._UZ(0,"app-alurakut-menu"),e.TgZ(1,"app-main-grid")(2,"aside",0),e._UZ(3,"app-profile-sidebar",1),e.qZA(),e.TgZ(4,"div",2)(5,"app-grid-box")(6,"h1",3),e._uU(7),e.qZA(),e._UZ(8,"app-orkut-icon-set"),e.qZA(),e.TgZ(9,"app-grid-box")(10,"h2",4),e._uU(11,"O que voc\xea deseja fazer?"),e.qZA(),e._UZ(12,"app-send-message"),e.qZA(),e.TgZ(13,"app-grid-box")(14,"h2",4),e._uU(15,"Recados"),e.qZA(),e._UZ(16,"app-messages"),e.qZA()(),e.TgZ(17,"div",5),e._UZ(18,"app-profile-relations-box",1)(19,"app-profile-relations-box",1),e.qZA()()),2&s&&(e.xp6(3),e.Q6J("data",e.VKq(4,$,t.userdata$)),e.xp6(4),e.hij("Perfil de ",t.name$,""),e.xp6(11),e.Q6J("data",t.followersProfile),e.xp6(1),e.Q6J("data",t.communitiesProfile))},dependencies:[S.A,x.$,C.l,A.A,T.z,b.w,F.d,u]});const D=[{path:"",component:d}];class l{}l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[c.Bz.forChild(D),c.Bz]});var O=o(3305);class m{}m.\u0275fac=function(s){return new(s||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[Z.ez,l,a.u5,O.m]})}}]);